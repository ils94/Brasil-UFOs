# üáßüá∑ Brasil-UFOs ‚Äì PDF Downloader for Brazilian National Archive (SIAN)

This project contains tools to help automate the download of PDF files from the Brazilian National Archive (SIAN). It's especially useful for downloading large batches of declassified documents, like those related to UFO sightings in Brazil.

## What It Does

1. **Tampermonkey script**: Injects a button into SIAN pages that lets you extract all PDF download paths from clickable elements with one click, saving them to a `.json` file.
2. **Python script**: Reads the `.json` files generated by the Tampermonkey script and downloads all the corresponding PDFs in parallel using multiple threads, with error handling and logging.

## Requirements

- Python 3.10+
- `requests` (install via `pip install requests`)

## How to Use

### 1. Use the Tampermonkey Script in Your Browser

1. **Install the [Tampermonkey extension](https://www.tampermonkey.net/)** for your browser (available for Chrome, Firefox, Edge, etc.).
2. **Create a new userscript** and paste in the code from this file: [`get_links.js`](https://github.com/ils94/Brasil-UFOs/blob/main/get_links.js)
3. **Visit the SIAN website** and, in the **Fundo** field, enter the following:  
   **`BR DFANBSB ARX - Objeto Voador N√£o Identificado - Fundo`**
4. A **‚ÄúSave PDF Paths‚Äù** button will appear in the top-right corner of the page.
5. **Click the button** to download a file named `pdf_paths.json`, which contains all PDF links from the current page.

> Repeat this process for **each page number** in the SIAN search results to collect all PDF links. Save all `.json` files in a folder named `jsons`, and place the `jsons` folder in the same directory as your `download_pdfs.py` script.

### 2. Run the Python Downloader Script

```bash
python download_pdfs.py
```

This will:

- Read all `.json` files inside the `jsons` folder.
- Download each PDF listed in those files from the base URL (`http://imagem.sian.an.gov.br/acervo/derivadas`).
- Save them into a `pdfs/` folder.
- Log all download statuses (success/failure) to a timestamped file inside the `logs/` folder.

## Notes

- The Python script uses multithreading (up to 10 threads or `2 x CPU cores`).
- It automatically retries failed downloads up to 3 times.
- Only valid `.pdf` links will be downloaded.
- Logs include detailed error messages if a download fails.

If you want the json containing the links: [`jsons`](https://github.com/ils94/Brasil-UFOs/blob/main/jsons.zip)

# Vers√£o em PT-BR

Este projeto cont√©m ferramentas para automatizar o download de arquivos PDF do Sistema de Informa√ß√µes do Arquivo Nacional (SIAN). √â especialmente √∫til para baixar grandes lotes de documentos desclassificados, como aqueles relacionados a avistamentos de OVNIs no Brasil.

## O que ele faz

1. **Script Tampermonkey**: Injeta um bot√£o nas p√°ginas do SIAN que permite extrair, com um clique, todos os caminhos de download de PDFs de elementos clic√°veis, salvando-os em um arquivo `.json`.
2. **Script Python**: L√™ os arquivos `.json` gerados pelo script do Tampermonkey e baixa todos os PDFs correspondentes em paralelo, usando m√∫ltiplas threads, com tratamento de erros e registro em log.

## Requisitos

- Python 3.10 ou superior
- Biblioteca `requests` (instale com `pip install requests`)

## Como usar

### 1. Use o script Tampermonkey no navegador

1. **Instale a [extens√£o Tampermonkey](https://www.tampermonkey.net/)** para seu navegador (dispon√≠vel para Chrome, Firefox, Edge etc.).
2. **Crie um novo userscript** e cole o c√≥digo deste arquivo: [`get_links.js`](https://github.com/ils94/Brasil-UFOs/blob/main/get_links.js)
3. **Acesse o site do SIAN** e, no campo **Fundo**, digite:  
   **`BR DFANBSB ARX - Objeto Voador N√£o Identificado - Fundo`**
4. Um bot√£o chamado **‚ÄúSave PDF Paths‚Äù** aparecer√° no canto superior direito da p√°gina.
5. **Clique no bot√£o** para baixar um arquivo chamado `pdf_paths.json`, que cont√©m todos os links de PDF da p√°gina atual.

> Repita esse processo para **cada n√∫mero de p√°gina** nos resultados de busca do SIAN para coletar todos os links de PDF. Salve todos os arquivos `.json` dentro de uma pasta chamada `jsons` e, depois, coloque essa pasta na mesma pasta do script `download_pdfs.py`.

### 2. Execute o script Python de download

```bash
python download_pdfs.py
```

Isso ir√°:

- Ler todos os arquivos `.json` dentro da pasta `jsons`.
- Baixar cada PDF listado nesses arquivos a partir da URL base (`http://imagem.sian.an.gov.br/acervo/derivadas`).
- Salv√°-los na pasta `pdfs/`.
- Registrar todos os status dos downloads (sucesso/falha) em um arquivo com data e hora dentro da pasta `logs/`.

## Observa√ß√µes

- O script Python usa multithreading (at√© 10 threads ou `2 x n√∫cleos da CPU`).
- Ele tenta novamente at√© 3 vezes caso um download falhe.
- Somente links v√°lidos de `.pdf` ser√£o baixados.
- Os logs incluem mensagens de erro detalhadas em caso de falhas.

Se voc√™ quer o json contendo os links: [`jsons`](https://github.com/ils94/Brasil-UFOs/blob/main/jsons.zip)
